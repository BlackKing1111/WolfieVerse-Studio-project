try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},o=(new e.Error).stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="baa1c8fa-f51e-4b0a-bc68-5072b7aa02d3",e._sentryDebugIdIdentifier="sentry-dbid-baa1c8fa-f51e-4b0a-bc68-5072b7aa02d3")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6021],{26021:(e,o,t)=>{t.r(o),t.d(o,{default:()=>v});var l=t(74848),a=t(96540),r=t(86715),s=t(13368),i=t.n(s),n=t(16528),c=t(50802),d=t(66010),m=t(59345),h=t(57374),p=t(99965),u=t(76871),g=t(91106),x=t.n(g),f=t(94388);let w=e=>{let{onPromptSubmit:o,isLoading:t,initialPromptValue:r,onPresetClick:s,whitelabelConfig:i,onPublicToggle:n,onBuildModeToggle:c,subscriptionData:d}=e,m=(0,a.useRef)(null),[h,p]=(0,a.useState)([]);return((0,a.useEffect)(()=>{(null==i?void 0:i.homepagePrompts)&&0!==i.homepagePrompts.length&&p([...i.homepagePrompts].sort(()=>.5-Math.random()).slice(0,4))},[null==i?void 0:i.homepagePrompts]),(null==i?void 0:i.homepageEnabled)!==!0)?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)("section",{ref:m,className:"relative overflow-hidden flex flex-col h-screen min-h-[800px] sm:min-h-screen wl-hook-homepage-container",style:{backgroundColor:(null==i?void 0:i.primaryColor)||"#111827"},"data-sentry-component":"WhitelabelHeroSection","data-sentry-source-file":"WhitelabelHeroSection.tsx",children:[(0,l.jsx)("div",{className:"relative z-50 wl-hook-homepage-header",children:(0,l.jsx)("div",{className:"max-w-full mx-auto px-4 py-4 wl-hook-wordmark-homepage-outer-container",children:(0,l.jsxs)("div",{className:"flex items-center justify-between h-8 wl-hook-wordmark-homepage-inner-container",children:[(0,l.jsx)(x(),{href:"/",className:"flex items-center wl-hook-wordmark-homepage","data-sentry-element":"Link","data-sentry-source-file":"WhitelabelHeroSection.tsx",children:(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[i.wordmark&&(0,l.jsx)("img",{className:"wl-hook-homepage-site-logo-image",src:i.wordmark,alt:(null==i?void 0:i.siteName)||"Platform",width:140}),!(null==i?void 0:i.wordmark)&&(null==i?void 0:i.logo)&&(0,l.jsx)("img",{className:"wl-hook-homepage-site-logo-image",src:i.logo,alt:(null==i?void 0:i.siteName)||"Platform",width:30}),!(null==i?void 0:i.wordmark)&&!(null==i?void 0:i.logo)&&(null==i?void 0:i.siteName)&&(0,l.jsx)("div",{className:"wl-hook-sitename-text text-white text-2xl font-bold",children:i.siteName})]})}),(0,l.jsx)(f.A,{"data-sentry-element":"AuthButtons","data-sentry-source-file":"WhitelabelHeroSection.tsx"})]})})}),(0,l.jsxs)("div",{className:"relative z-20 container mx-auto px-4 flex flex-col justify-center h-[calc(100vh-80px)] min-h-[700px] sm:min-h-[calc(100vh-80px)] wl-hook-homepage-content",children:[(0,l.jsxs)("div",{className:"w-full max-w-4xl mx-auto text-center wl-hook-homepage-prompt-section",children:[(0,l.jsx)("h3",{className:"text-5xl xs:text-5xl sm:text-6xl md:text-6xl font-extrabold text-white mb-6 wl-hook-homepage-title-container",children:(0,l.jsx)("span",{className:"text-gray-300 wl-hook-homepage-title",children:(null==i?void 0:i.homepageTitle)||""})}),(0,l.jsx)("p",{className:"text-lg sm:text-xl md:text-xl text-gray-300 mb-8 sm:mb-12 max-w-3xl mx-auto wl-hook-homepage-description",children:(null==i?void 0:i.homepageDescription)||""}),(0,l.jsx)("div",{className:"mb-8 sm:mb-12",children:(0,l.jsx)(u.A,{onSubmit:o,isLoading:t,initialValue:r,onPublicToggle:n,onBuildModeToggle:c,subscriptionData:d,"data-sentry-element":"PromptInput","data-sentry-source-file":"WhitelabelHeroSection.tsx"})})]}),(0,l.jsx)("div",{className:"w-full max-w-4xl mx-auto wl-hook-homepage-presets-container",children:(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 wl-hook-homepage-presets-grid",children:h.map((e,o)=>(0,l.jsx)("button",{className:"px-4 py-2 bg-gray-800 rounded-xl text-gray-300 hover:bg-gray-700 transition-colors border border-gray-600 hover:border-gray-600 flex items-center justify-center shadow-lg wl-hook-homepage-preset-button",onClick:()=>s(e.prompt),children:(0,l.jsx)("span",{className:"wl-hook-homepage-preset-button-text",children:e.text})},o))})})]})]})},b=e=>{var o;let{whitelabelConfig:t}=e,a=new Date().getFullYear();return(0,l.jsx)("footer",{className:"overflow-hidden relative border-t border-gray-800 wl-hook-homepage-footer",style:{backgroundColor:(null==t?void 0:t.primaryColor)||""},"data-sentry-component":"Footer","data-sentry-source-file":"WhitelabelFooter.tsx",children:(0,l.jsxs)("div",{className:"container mx-auto px-6 py-6 wl-hook-homepage-footer-content",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-6 wl-hook-homepage-footer-content-inner",children:[(0,l.jsxs)("div",{className:"flex-shrink-0 wl-hook-homepage-footer-logo-container",children:[(0,l.jsxs)(x(),{href:"/",className:"inline-block wl-hook-homepage-footer-logo-link","data-sentry-element":"Link","data-sentry-source-file":"WhitelabelFooter.tsx",children:[t.wordmark&&(0,l.jsx)("img",{className:"wl-hook-homepage-footer-logo-image",src:t.wordmark,alt:(null==t?void 0:t.siteName)||"Platform",width:140}),!(null==t?void 0:t.wordmark)&&(null==t?void 0:t.logo)&&(0,l.jsx)("img",{className:"wl-hook-homepage-footer-logo-image",src:t.logo,alt:(null==t?void 0:t.siteName)||"Platform",width:30}),!(null==t?void 0:t.wordmark)&&!(null==t?void 0:t.logo)&&(null==t?void 0:t.siteName)&&(0,l.jsx)("div",{className:"wl-hook-homepage-footer-logo-text text-white text-2xl font-bold",children:t.siteName})]}),(0,l.jsx)("p",{className:"mt-3 text-gray-400 text-md wl-hook-homepage-footer-description",children:(null==t?void 0:t.homepageDescription)||""})]}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row md:flex-wrap gap-x-6 gap-y-2 wl-hook-homepage-footer-links-container",children:null==t?void 0:null===(o=t.homepageFooterLinks)||void 0===o?void 0:o.map(e=>(0,l.jsx)("a",{href:e.url,target:e.newTab?"_blank":"_self",className:"text-gray-400 hover:text-white transition-colors text-md whitespace-nowrap wl-hook-homepage-footer-link",children:e.title},e.title))})]}),(0,l.jsx)("div",{className:"border-t border-gray-800 mt-6 pt-4 wl-hook-homepage-footer-copyright-container",children:(0,l.jsxs)("p",{className:"text-gray-400 text-sm wl-hook-homepage-footer-copyright-text",children:["\xa9 ",a," ",(null==t?void 0:t.siteName)||"",". All rights reserved."]})})]})})};function v(){let e=(0,r.useRouter)(),[o,t]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),[g,x]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),{isAuthenticated:k}=(0,d.A)(),[y,j]=(0,a.useState)(!1),[N,C]=(0,a.useState)(null),[S,P]=(0,a.useState)(!1),{isWhitelabel:E,isClient:F,whitelabelConfig:T}=(0,p.p)();(0,a.useEffect)(()=>{{let e=localStorage.getItem("pendingPrompt");e&&v(e)}},[k]);let I=(0,a.useCallback)(async()=>{if(!k)return;let e=h.A.referredBy();if(e)try{(await fetch("/api/users/referred-by",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referredBy:e})})).ok||console.error("Failed to update referredBy")}catch(e){console.error("Error updating referredBy:",e)}},[k]),D=(0,a.useCallback)(async()=>{if(k)try{P(!0);let e=await fetch("/api/subscription");if(e.ok){let o=await e.json();o.subscription&&C(o.subscription)}else console.error("Failed to fetch subscription data")}catch(e){console.error("Error fetching subscription data:",e)}finally{P(!1)}},[k]);(0,a.useEffect)(()=>{D(),I()},[D,k,I]);let _=(0,a.useCallback)(e=>!1!==e||k&&N?!1!==e||null!=N&&!!N.tier&&(null==N?void 0:N.tier)!==m.i.FREE||(j(!0),!1):(console.error("User not authenticated in whitelabel mode"),u(!0),!1),[N,k]),A=(0,a.useCallback)(e=>!0!==e||k&&N?!0!==e||null!=N&&!!N.tier&&(null==N?void 0:N.tier)!==m.i.FREE||(j(!0),!1):(console.error("User not authenticated in whitelabel mode"),!1),[N,k]),L=(0,a.useCallback)(async(o,l,a,r)=>{if(!k){x(o),u(!0);return}t(!0);try{let s=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:o,attachments:l||[],platform:a||"website",isPublic:void 0===r||r})});if(402===s.status&&(await s.json()).requiresUpgrade){j(!0),t(!1);return}if(!s.ok)throw Error("Failed to create project");let i=await s.json(),n=i.project._id,c=i.project.activeMessageId;localStorage.removeItem("pendingPrompt"),localStorage.setItem("activeMessageId:".concat(n),c),e.push("/project/".concat(n))}catch(e){console.error("Error creating project:",e),alert("Failed to create project. Please try again."),t(!1)}},[k,e]);return((0,a.useEffect)(()=>{E&&F&&T&&!0!==T.homepageEnabled&&e.push("/dashboard")},[E,e,F,T]),(null==T?void 0:T.homepageEnabled)===!0)?(0,l.jsxs)("div",{style:{backgroundColor:(null==T?void 0:T.primaryColor)||""},children:[(0,l.jsxs)(i(),{children:[(0,l.jsxs)("title",{children:[(null==T?void 0:T.siteName)||""," - ",(null==T?void 0:T.homepageTitle)||""]}),(0,l.jsx)("meta",{name:"description",content:(null==T?void 0:T.homepageDescription)||""})]}),(0,l.jsx)("main",{children:(0,l.jsx)(w,{onPromptSubmit:L,isLoading:o,initialPromptValue:f,onPresetClick:e=>{v(e),localStorage.setItem("pendingPrompt",e)},whitelabelConfig:T,onPublicToggle:_,onBuildModeToggle:A,subscriptionData:N})}),(null==T?void 0:T.homepageFooterLinks)&&(null==T?void 0:T.homepageFooterLinks.length)>0&&(0,l.jsx)(b,{whitelabelConfig:T}),(0,l.jsx)(n.A,{isOpen:s,onClose:()=>u(!1),prompt:g}),N&&(0,l.jsx)(c.A,{isOpen:y,onClose:()=>{j(!1)},currentTier:N.tier,currentUsage:N.messageCount,currentLimit:N.limit,subscriptionData:N})]}):(0,l.jsx)(l.Fragment,{})}}}]);