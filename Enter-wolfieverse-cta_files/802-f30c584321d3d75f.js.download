try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="480be87d-50cf-4ad3-b210-a7b0d771a288",e._sentryDebugIdIdentifier="sentry-dbid-480be87d-50cf-4ad3-b210-a7b0d771a288")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[802],{50802:(e,t,r)=>{r.d(t,{A:()=>N});var i=r(74848),s=r(96540),n=r(86715),a=r(36347),o=r(22926),l=r(59345),d=r(67165),c=r(35416),m=r(11221);let h={isProduction:()=>window.location.href.startsWith("https://famous.ai"),trackLead:()=>{window.gtag&&h.isProduction()&&window.gtag("event","generate_lead",{send_to:"AW-11145286602/flecCK_4g8IaEMqnvsIp"})},trackConversion:()=>{window.gtag&&h.isProduction()&&window.gtag("event","conversion",{send_to:"AW-11145286602/flecCK_4g8IaEMqnvsIp",transaction_id:""})}};var u=r(57374);let x={isProduction:()=>window.location.href.startsWith("https://famous.ai"),trackPurchase:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toString(36).substring(2,15);if(x.isProduction())return function(){try{r=""!==top.document.referer?encodeURIComponent(top.document.referrer.substring(0,512)):""}catch(e){r=null!==document.referrer?document.referrer.toString().substring(0,512):""}try{i=window&&window.top&&document.location&&window.top.location===document.location?document.location:window&&window.top&&window.top.location&&""!==window.top.location?window.top.location:document.location}catch(e){i=document.location}try{s=""!==parent.location.href?encodeURIComponent(parent.location.href.toString().substring(0,512)):""}catch(e){try{s=null!==i?encodeURIComponent(i.toString().substring(0,512)):""}catch(e){s=""}}var r,i,s,n,a=document.createElement("script"),o=null,l=Number(document.getElementsByTagName("script").length)-1,d=document.getElementsByTagName("script")[l];void 0===n&&(n=Math.floor(1e17*Math.random())),o="dx.mountain.com/spx?conv=1&shaid=45077&tdr="+r+"&plh="+s+"&cb="+n+"&shoid="+t+"&shoamt="+e+"&shocur=&shopid=&shoq=&shoup=&shpil=",a.type="text/javascript",a.src=("https:"===document.location.protocol?"https://":"http://")+o,d.parentNode.insertBefore(a,d)}()}},p={isProduction:()=>window.location.href.startsWith("https://famous.ai"),trackLead:()=>{window.spdt&&p.isProduction()&&window.spdt("lead",{})},trackPurchase:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";window.spdt&&p.isProduction()&&window.spdt("purchase",{value:e,currency:"USD"})}},f={isProduction:()=>window.location.href.startsWith("https://famous.ai"),trackPurchase:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";window.ttq&&window.ttq.identify&&f.isProduction()&&(window.ttq.identify({email:"<hashed_email_address>",phone_number:"<hashed_phone_number>",external_id:"<hashed_extenal_id>"}),window.ttq.track("CompletePayment",{contents:[{content_id:"<content_identifier>",content_type:"<content_type>",content_name:"<content_name>",quantity:1,price:e}],value:e,currency:t}))}};var g=r(99965);function y(e){let{isOpen:t,onClose:r,onConfirm:s,isProcessing:n=!1}=e;return t?(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50","data-sentry-component":"ConfirmCancelModal","data-sentry-source-file":"ConfirmCancelModal.tsx",children:(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mr-3",children:(0,i.jsx)("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","data-sentry-element":"svg","data-sentry-source-file":"ConfirmCancelModal.tsx",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 3 1.732 3z","data-sentry-element":"path","data-sentry-source-file":"ConfirmCancelModal.tsx"})})}),(0,i.jsx)("div",{children:(0,i.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Cancel Subscription?"})})]}),(0,i.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","data-sentry-element":"svg","data-sentry-source-file":"ConfirmCancelModal.tsx",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12","data-sentry-element":"path","data-sentry-source-file":"ConfirmCancelModal.tsx"})})})]}),(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:[(0,i.jsx)("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:"Warning!"})," This will delete all of your projects. Deleted projects cannot be restored. Are you sure?        "]})}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,i.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors font-medium",disabled:n,children:"No, Don't Cancel"}),(0,i.jsx)("button",{onClick:s,disabled:n,className:"px-4 py-2 border border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 disabled:border-red-400 disabled:text-red-400 text-red-600 dark:text-red-400 rounded-lg font-medium transition-colors flex items-center",children:n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-red-600 dark:text-red-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):"Yes, Cancel"})]})]})}):null}var b=r(77836);let w=(0,a.c)("pk_live_9eBOACiG83hSt0n4y7Kg9Exo"),v=(0,a.c)("pk_live_51OJhJBHdGQpsHqInIzu7c6PzGPSH0yImD4xfpofvxvFZs0VFhPRXZCyEgYkkhOtBOXFWvssYASs851mflwQvjnrl00T6DbUwWZ"),k=e=>{let{isOpen:t,onClose:r,currentTier:a,currentUsage:w,currentLimit:v,subscriptionData:k}=e;(0,n.useRouter)();let N=(0,o.useStripe)(),[S,C]=(0,s.useState)(l.i.SPARK),{isWhitelabel:P,whitelabelConfig:E}=(0,g.p)(),[L,I]=(0,s.useState)(!1),[M,A]=(0,s.useState)(null),[B,R]=(0,s.useState)(null),[T,_]=(0,s.useState)(!1),[O,D]=(0,s.useState)(null),[F,W]=(0,s.useState)(!1),U=e=>({[l.i.FREE]:0,[l.i.MINI]:1,[l.i.SPARK]:2,[l.i.LIFTOFF]:3,[l.i.CRUISE]:4,[l.i.THRUST]:5,[l.i.ORBIT]:6,[l.i.ASCENT]:7,[l.i.SKYLINE]:8,[l.i.VELOCITY]:9,[l.i.ZENITH]:10,[l.i.NEBULA]:11,[l.i.SUPERNOVA]:12,[l.i.GALAXY]:13,[l.i.COSMOS]:14,[l.i.ENTERPRISE]:15})[e]||0,q=(0,s.useCallback)(e=>{if(!P||!E)return null;let t=l.fD.find(t=>t.tier===e);if(!t||void 0===t.price)return null;let r=("production"===b.env.STRIPE_MODE?t.prodWhitelabelPriceIds||[]:t.testWhitelabelPriceIds||[]).find(e=>e.multiplier===E.multiplier);return r?r.price:null},[P,E]),K=(null==k?void 0:k.tier)||a||l.i.FREE,Y=(null==k?void 0:k.monthlyBuildSpend)||0,z=(null==k?void 0:k.monthlyBuildCredit)||50,H=l.fD.find(e=>e.tier===l.i.FREE),V=l.fD.find(e=>e.tier===l.i.MINI),$=l.fD.find(e=>e.tier===l.i.SPARK),J=async()=>{W(!1);let e=l.i.FREE,t=l.fD.find(t=>t.tier===e);if(!t||void 0===t.price)return;let i=l.fD.find(e=>e.tier===K);if(i&&void 0!==i.price){I(!0),A(e),R(null);try{let i=await fetch("/api/subscription/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:e,creditAmount:t.monthlyMessageLimit,referredBy:(null==k?void 0:k.referredBy)||u.A.referredBy()})}),s=await i.json();if(!i.ok)throw Error(s.error||"Something went wrong");setTimeout(()=>{I(!1),A(null),r(),window.location.reload()},8e3)}catch(e){R(e.message||"Something went wrong"),I(!1),A(null)}}},G=async(e,t)=>{console.log("\uD83D\uDD04 handleUpgradeClick",e,K);let i=l.fD.find(t=>t.tier===e);if(!i||void 0===i.price)return;let s=l.fD.find(e=>e.tier===K);if(s&&void 0!==s.price){if(e===l.i.FREE){W(!0);return}I(!0),A(e),R(null);try{if(t){console.log("\uD83D\uDD04 Canceling existing pending downgrade before processing new downgrade");let e=await fetch("/api/subscription/cancel-downgrade",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to cancel existing downgrade")}await new Promise(e=>setTimeout(e,1e3))}let s=await fetch("/api/subscription/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:e,creditAmount:i.monthlyMessageLimit,referredBy:(null==k?void 0:k.referredBy)||u.A.referredBy()})}),n=await s.json();if(!s.ok){if(400===s.status&&n.error&&(n.error.includes("payment source")||n.error.includes("payment method"))){_(!0),D({tier:e,creditAmount:i.monthlyMessageLimit}),I(!1),A(null);return}throw Error(n.error||"Something went wrong")}if(n.requiresAction){if(!N)throw Error("Stripe not found");let{error:t,paymentIntent:r}=await N.confirmCardPayment(n.clientSecret);if(t)throw Error(t.message);if(!(s=await fetch("/api/subscription/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:e,subscriptionId:n.subscriptionId,paymentIntentId:r.id,paymentConfirmed:!0,referredBy:(null==k?void 0:k.referredBy)||u.A.referredBy()})})).ok)throw Error(n.error||"Something went wrong")}if(i.price>0&&!P)try{d.A.trackPurchase(i.price),c.A.trackPurchase(i.price),m.A.trackPurchase(i.price.toString()),h.trackConversion(),x.trackPurchase(i.price.toString()),p.trackPurchase(i.price.toString()),f.trackPurchase(i.price.toString())}catch(e){console.error("Error track SubscriptionModal:",e)}setTimeout(()=>{I(!1),A(null),r(),window.location.reload()},8e3)}catch(e){R(e.message||"Something went wrong"),I(!1),A(null)}}};return t?(0,i.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50","data-sentry-component":"SubscriptionModal","data-sentry-source-file":"SubscriptionModal.tsx",children:[(0,i.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:K===l.i.FREE?"Upgrade Your Subscription":"Manage Subscription"}),(0,i.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","data-sentry-element":"svg","data-sentry-source-file":"SubscriptionModal.tsx",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12","data-sentry-element":"path","data-sentry-source-file":"SubscriptionModal.tsx"})})})]}),(null==k?void 0:k.stripeSubscriptionStatus)&&("past_due"===k.stripeSubscriptionStatus||"incomplete"===k.stripeSubscriptionStatus)&&(0,i.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-md border border-red-200 dark:border-red-700",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Payment Issue"}),(0,i.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:"There was a problem renewing your subscription."})]})]}),(0,i.jsx)("button",{onClick:async()=>{try{let e=await fetch("/api/subscription/portal",{method:"POST"});if(e.ok){let{url:t}=await e.json();t&&(window.location.href=t)}else{let t=await e.json();throw Error(t.error||"Failed to create portal session")}}catch(e){console.error("Error accessing billing portal:",e),R(e.message||"Unable to access the billing portal at this time.")}},className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-colors flex-shrink-0",children:"Fix It"})]})}),T&&O?(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Add Payment Method"}),(0,i.jsx)("p",{className:"mb-4 text-gray-600 dark:text-gray-300",children:"Please provide your payment details to complete the subscription."}),(0,i.jsx)(j,{tier:O.tier,creditAmount:O.creditAmount,onSuccess:()=>{setTimeout(()=>{r(),window.location.reload()},5e3)},onError:e=>{R(e),_(!1),D(null)},referredBy:(null==k?void 0:k.referredBy)||u.A.referredBy()})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:["You've used $",Y.toFixed(2)," of your $",z," included build credit during the current period."]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"border rounded-lg overflow-hidden flex flex-col h-full border-gray-200 dark:border-gray-700",children:[(0,i.jsxs)("div",{className:"p-4 flex-1",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-1",children:(null==H?void 0:H.name)||"Free"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["$",(null==H?void 0:H.price)||0,(0,i.jsx)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:"/month"})]})]}),(0,i.jsx)("ul",{className:"space-y-2 text-sm mb-4",children:null==H?void 0:H.features.map((e,t)=>(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:P?e.replaceAll(/famous.ai/ig,(null==E?void 0:E.siteName)||"platform"):e})})]},t))})]}),(0,i.jsx)("div",{className:"pt-0 px-4 pb-4 mt-auto",children:K!==l.i.FREE&&(0,i.jsx)("button",{onClick:()=>G(l.i.FREE,!0),className:"w-full py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors font-medium",children:L&&M===l.i.FREE?"Cancelling...":"Cancel"})})]}),(0,i.jsxs)("div",{className:"border rounded-lg overflow-hidden flex flex-col h-full border-gray-200 dark:border-gray-700",children:[(0,i.jsxs)("div",{className:"pt-4 px-4 pb-0 flex-1",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-1",children:(null==V?void 0:V.name)||"Mini"}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["$",K===l.i.MINI?(null==k?void 0:k.monthlyPrice)||7:(null==k?void 0:k.referredBy)||u.A.referredBy()?(null==V?void 0:V.affiliatePrice)||6:P?q(l.i.MINI):(null==V?void 0:V.price)||7,(0,i.jsx)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:"/month"})]}),!P&&(u.A.referredBy()||(null==k?void 0:k.referredBy))&&!(K===l.i.MINI&&(null==V?void 0:V.price)===(null==k?void 0:k.monthlyPrice))&&(0,i.jsx)("div",{className:"mt-1 flex flex-col items-center",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 line-through",children:["$",(null==V?void 0:V.price)||7,"/mo"]}),(0,i.jsx)("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-2 py-0.5 rounded-full font-medium",children:"Referral Discount"})]})})]})]}),(0,i.jsx)("ul",{className:"space-y-2 text-sm mb-4",children:null==V?void 0:V.features.map((e,t)=>(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:P?e.replaceAll(/famous.ai/ig,(null==E?void 0:E.siteName)||"platform"):e}),e.toLowerCase().includes("off hosting")&&(0,i.jsx)("button",{onClick:()=>window.open("/usage","_blank"),className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"Learn more about hosting",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]},t))})]}),(0,i.jsx)("div",{className:"pt-0 px-4 pb-4 mt-auto",children:(0,i.jsx)("button",{className:"w-full py-3 bg-primary-blue text-white rounded-lg transition-colors font-medium",onClick:()=>G(l.i.MINI,!(L&&M===l.i.MINI)&&K!==l.i.MINI&&K!==l.i.FREE),disabled:L||K===l.i.MINI,children:L&&M===l.i.MINI?"Processing...":K===l.i.MINI?"Current Plan":K===l.i.FREE?"Upgrade":"Downgrade"})})]}),(0,i.jsxs)("div",{className:"border rounded-lg overflow-hidden flex flex-col h-full border-gray-200 dark:border-gray-700",children:[(0,i.jsxs)("div",{className:"pt-4 px-4 pb-0 flex-1",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-1",children:(null==$?void 0:$.name)||"Spark"}),(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["$",K===l.i.SPARK?(null==k?void 0:k.monthlyPrice)||47:(null==k?void 0:k.referredBy)||u.A.referredBy()?(null==$?void 0:$.affiliatePrice)||42:P?q(l.i.SPARK):(null==$?void 0:$.price)||47,(0,i.jsx)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:"/month"})]}),!P&&(u.A.referredBy()||(null==k?void 0:k.referredBy))&&!(K===l.i.SPARK&&(null==$?void 0:$.price)===(null==k?void 0:k.monthlyPrice))&&(0,i.jsx)("div",{className:"mt-1 flex flex-col items-center",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 line-through",children:["$",(null==$?void 0:$.price)||47,"/mo"]}),(0,i.jsx)("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-2 py-0.5 rounded-full font-medium",children:"Referral Discount"})]})})]})]}),(0,i.jsx)("ul",{className:"space-y-2 text-sm mb-4",children:null==$?void 0:$.features.map((e,t)=>(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:P?e.replaceAll(/famous.ai/ig,(null==E?void 0:E.siteName)||"platform"):e}),e.toLowerCase().includes("off hosting")&&(0,i.jsx)("button",{onClick:()=>window.open("/usage","_blank"),className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"Learn more about hosting",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]},t))})]}),(0,i.jsx)("div",{className:"pt-0 px-4 pb-4 mt-auto",children:(0,i.jsx)("button",{className:"w-full py-3 bg-primary-blue text-white rounded-lg transition-colors font-medium",onClick:()=>G(l.i.SPARK,!(L&&M===l.i.SPARK)&&K!==l.i.SPARK&&K!==l.i.MINI&&K!==l.i.FREE),disabled:L||K===l.i.SPARK,children:L&&M===l.i.SPARK?"Processing...":K===l.i.SPARK?"Current Plan":K===l.i.FREE||K===l.i.MINI?"Upgrade":"Downgrade"})})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"âš¡ Power User Plans"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Perfect for teams and heavy users who need more capacity"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.i.LIFTOFF,l.i.CRUISE,l.i.THRUST].map(e=>{var t;let r=l.fD.find(t=>t.tier===e);if(!r)return null;let s=K===e,n=U(K),a=U(e);return(0,i.jsxs)("div",{className:"border rounded-lg overflow-hidden flex flex-col h-full border-orange-200 dark:border-orange-600 bg-gradient-to-br from-orange-50/50 to-yellow-50/50 dark:from-orange-900/10 dark:to-yellow-900/10",children:[(0,i.jsxs)("div",{className:"p-4 flex-1",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-1 text-orange-900 dark:text-orange-100",children:r.name}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:["$",s?(null==k?void 0:k.monthlyPrice)||r.price:P?q(e):r.price,(0,i.jsx)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:"/month"})]}),(0,i.jsxs)("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1 font-medium",children:["$",null===(t=r.monthlyBuildCredit)||void 0===t?void 0:t.toLocaleString()," in build credit"]})]}),(0,i.jsxs)("ul",{className:"space-y-2 text-sm mb-4",children:[(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-orange-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:["Everything in ",r.tier===l.i.LIFTOFF?"Spark":r.tier===l.i.CRUISE?"Lift-Off":r.tier===l.i.THRUST?"Cruise":"Spark"]})})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-orange-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"High-capacity hosting"})})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-orange-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Pay-as-you-go build credit"})})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-orange-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:[r.usageDiscountPercentage,"% off hosting"]}),(0,i.jsx)("button",{onClick:()=>window.open("/usage","_blank"),className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"Learn more about hosting",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})]})]}),(0,i.jsx)("div",{className:"p-4 mt-auto",children:(0,i.jsx)("button",{className:"w-full py-3 bg-gradient-to-r from-orange-600 to-yellow-600 hover:from-orange-700 hover:to-yellow-700 text-white rounded-lg transition-all duration-200 font-medium shadow-md hover:shadow-lg",onClick:()=>G(e,!(L&&M===e)&&!s&&n>=a),disabled:L||s,children:L&&M===e?"Processing...":s?"Current Plan":n<a?"Upgrade":"Downgrade"})})]},e)})})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"\uD83D\uDE80 Premium High-Volume Plans"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Need even more build credit? Choose from our premium tiers"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.i.ORBIT,l.i.ASCENT,l.i.SKYLINE,l.i.VELOCITY,l.i.ZENITH,l.i.NEBULA,l.i.SUPERNOVA,l.i.GALAXY,l.i.COSMOS].map(e=>{var t;let r=l.fD.find(t=>t.tier===e);if(!r)return null;let s=K===e,n=U(K),a=U(e);return(0,i.jsxs)("div",{className:"border rounded-lg overflow-hidden flex flex-col h-full border-purple-200 dark:border-purple-600 bg-gradient-to-br from-purple-50/50 to-indigo-50/50 dark:from-purple-900/10 dark:to-indigo-900/10",children:[(0,i.jsxs)("div",{className:"p-4 flex-1",children:[(0,i.jsxs)("div",{className:"text-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-1 text-purple-900 dark:text-purple-100",children:r.name}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["$",s?(null==k?void 0:k.monthlyPrice)||r.price:P?q(e):r.price,(0,i.jsx)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:"/month"})]}),(0,i.jsxs)("p",{className:"text-sm text-purple-700 dark:text-purple-300 mt-1 font-medium",children:["$",null===(t=r.monthlyBuildCredit)||void 0===t?void 0:t.toLocaleString()," in build credit"]})]}),(0,i.jsxs)("ul",{className:"space-y-2 text-sm mb-4",children:[(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:["Everything in ",r.tier===l.i.ORBIT?"Thrust":r.tier===l.i.ASCENT?"Orbit":r.tier===l.i.SKYLINE?"Ascent":r.tier===l.i.VELOCITY?"Skyline":r.tier===l.i.ZENITH?"Velocity":r.tier===l.i.NEBULA?"Zenith":r.tier===l.i.SUPERNOVA?"Nebula":r.tier===l.i.GALAXY?"Supernova":r.tier===l.i.COSMOS?"Galaxy":"lower tiers"]})})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"High-volume usage"})})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Pay-as-you-go build credit"})})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:[r.usageDiscountPercentage,"% off hosting"]}),(0,i.jsx)("button",{onClick:()=>window.open("/usage","_blank"),className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"Learn more about hosting",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})]})]}),(0,i.jsx)("div",{className:"p-4 mt-auto",children:(0,i.jsx)("button",{className:"w-full py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 font-medium shadow-md hover:shadow-lg",onClick:()=>G(e,!(L&&M===e)&&!s&&n>=a),disabled:L||s,children:L&&M===e?"Processing...":s?"Current Plan":n<a?"Upgrade":"Downgrade"})})]},e)})})]})]}),B&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 rounded-lg",children:B}),!T&&(null==k?void 0:k.stripeSubscriptionId)&&(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("button",{onClick:async()=>{try{let e=await fetch("/api/subscription/portal",{method:"POST"});if(e.ok){let{url:t}=await e.json();t&&(window.location.href=t)}else{let t=await e.json();throw Error(t.error||"Failed to create portal session")}}catch(e){console.error("Error accessing billing portal:",e),alert(e.message||"Unable to access the billing portal at this time.")}},className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:"View invoices or change your payment method"})}),!T&&!P&&(0,i.jsx)("div",{className:"text-center mt-4",children:(0,i.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["Need support? Email"," ",(0,i.jsx)("a",{href:"mailto:support@famous.ai",className:"text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white transition-colors underline",children:"support@famous.ai"})]})})]})}),(0,i.jsx)(y,{isOpen:F,onClose:()=>W(!1),onConfirm:J,isProcessing:L&&M===l.i.FREE,"data-sentry-element":"ConfirmCancelModal","data-sentry-source-file":"SubscriptionModal.tsx"})]}):null},j=e=>{let{onSuccess:t,onError:r,tier:n,creditAmount:a,referredBy:u}=e,y=(0,o.useStripe)(),b=(0,o.useElements)(),[w,v]=(0,s.useState)(!1),{isWhitelabel:k}=(0,g.p)(),j=async e=>{if(e.preventDefault(),!y||!b)return;let i=b.getElement(o.CardElement);if(i){v(!0);try{let{error:e,paymentMethod:r}=await y.createPaymentMethod({type:"card",card:i});if(e)throw Error(e.message);if(!r)throw Error("Failed to create payment method");let s=await fetch("/api/subscription/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:n,creditAmount:a,paymentMethodId:r.id,referredBy:u})}),o=await s.json();if(!s.ok)throw Error(o.error||"Something went wrong");if(o.requiresAction){let{error:e,paymentIntent:t}=await y.confirmCardPayment(o.clientSecret);if(e)throw Error(e.message);if(!(s=await fetch("/api/subscription/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:n,creditAmount:a,paymentMethodId:r.id,subscriptionId:o.subscriptionId,paymentIntentId:t.id,paymentConfirmed:!0,referredBy:u})})).ok)throw Error(o.error||"Something went wrong")}let g=l.fD.find(e=>e.tier===n);if((null==g?void 0:g.price)&&g.price>0&&!k)try{d.A.trackPurchase(g.price),c.A.trackPurchase(g.price),m.A.trackPurchase(g.price.toString()),h.trackConversion(),x.trackPurchase(g.price.toString()),p.trackPurchase(g.price.toString()),f.trackPurchase(g.price.toString())}catch(e){console.error("Error tracking SubscriptionModal:",e)}t()}catch(e){r(e.message||"Failed to process payment")}finally{v(!1)}}};return(0,i.jsxs)("form",{onSubmit:j,className:"space-y-4 mt-4","data-sentry-component":"CardCollectionForm","data-sentry-source-file":"SubscriptionModal.tsx",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Card Details"}),(0,i.jsx)("div",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",children:(0,i.jsx)(o.CardElement,{options:{style:{base:{fontSize:"16px",color:"#ffffff",backgroundColor:"transparent","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},"data-sentry-element":"CardElement","data-sentry-source-file":"SubscriptionModal.tsx"})}),(0,i.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Your card information is securely processed by Stripe."})]}),(0,i.jsx)("button",{type:"submit",disabled:!y||w,className:"w-full py-3 bg-primary-blue text-white rounded-lg transition-colors font-medium",children:w?"Processing...":"Subscribe"})]})};function N(e){let{isWhitelabel:t,isClient:r}=(0,g.p)();return e.isOpen&&r?t?(0,i.jsx)(o.Elements,{stripe:w,children:(0,i.jsx)(k,{...e})}):(0,i.jsx)(o.Elements,{stripe:v,children:(0,i.jsx)(k,{...e})}):null}},67165:(e,t,r)=>{r.d(t,{A:()=>s});let i={isProduction:()=>window.location.href.startsWith("https://famous.ai"),trackLead:()=>{window.fbq&&i.isProduction()&&window.fbq("track","Lead")},trackPurchase:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";window.fbq&&i.isProduction()&&window.fbq("track","Purchase",{value:e,currency:t})}},s=i},57374:(e,t,r)=>{r.d(t,{A:()=>s});let i={isProduction:()=>window.location.href.startsWith("https://famous.ai"),trackReferral:e=>{window.fpr&&i.isProduction()&&window.fpr("referral",{email:e})},referredBy:()=>{if("undefined"!=typeof localStorage){let e=localStorage.getItem("fpr_referrer");if(e)try{let t=JSON.parse(e);if(t.expiry&&Date.now()<=t.expiry)return t.value;localStorage.removeItem("fpr_referrer")}catch(e){localStorage.removeItem("fpr_referrer")}}return null}},s=i},35416:(e,t,r)=>{r.d(t,{A:()=>s});let i={isProduction:()=>window.location.href.startsWith("https://famous.ai"),trackLead:()=>{window.qbit&&i.isProduction()&&window.qbit("event","lead",{agid:"1480",adid:"948171",referrer:document.referrer,site_url:window.location.href,timestamp:Date.now()})},trackPurchase:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;window.qbit&&i.isProduction()&&window.qbit("event","purchase",{value:{checkout_value:e},referrer:document.referrer,site_url:window.location.href,agid:"1480",adid:"948171",timestamp:Date.now()})}},s=i},11221:(e,t,r)=>{r.d(t,{A:()=>s});let i={isProduction:()=>window.location.href.startsWith("https://famous.ai"),trackLead:()=>{window.vbpx&&i.isProduction()&&window.vbpx("event","lead")},trackPurchase:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";window.vbpx&&i.isProduction()&&window.vbpx("event","purchase",{price_usd:e})}},s=i}}]);